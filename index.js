import{a as p,i as k,S as Y}from"./assets/vendor-DAK8oDSN.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const y="https://sound-wave.b.goit.study/api";async function D(e=1,t=8){try{return(await p.get(`${y}/artists`,{params:{page:e,limit:t}})).data}catch(r){throw console.error("Error fetching artists:",r),r}}async function N(e){try{return(await p.get(`${y}/artists/${e}`)).data}catch(t){throw console.error(`Error fetching artist with ID ${e}:`,t),t}}async function H(e){try{return(await p.get(`${y}/artists/${e}/albums`)).data}catch(t){throw console.error(`Error fetching albums for artist with ID ${e}:`,t),t}}async function j(){try{const e=await p.get(`${y}/feedbacks`);return Array.isArray(e.data)?e.data:e.data.data&&Array.isArray(e.data.data)?e.data.data:[]}catch(e){throw console.error("Error fetching feedbacks:",e),e}}const d=document.getElementById("artist-modal"),O=d.querySelector(".modal-overlay"),P=d.querySelector(".modal-close"),b=document.getElementById("loader"),$=document.getElementById("artist-albums"),_=document.querySelector(".artist-gallery");let B=[];function G(e){if(!e||isNaN(e))return"-";const t=Math.floor(e/1e3),r=Math.floor(t/60),n=t%60;return`${r}:${n.toString().padStart(2,"0")}`}async function R(e){d.classList.remove("hidden"),document.body.style.overflow="hidden",b.style.display="block";try{const t=await N(e);await V(t),b.style.display="none"}catch(t){console.error(t),b.textContent="Error loading data"}}async function V(e){document.getElementById("artist-name").textContent=e.strArtist,document.getElementById("artist-image").src=e.strArtistThumb||"";const t=document.getElementById("artist-years");e.intFormedYear&&e.intDiedYear?t.textContent=`Years active: ${e.intFormedYear} – ${e.intDiedYear}`:e.intFormedYear&&!e.intDiedYear?t.textContent=`Years active: ${e.intFormedYear} – present`:t.textContent="Years active: information missing";const r=document.getElementById("artist-gender"),n=document.getElementById("artist-members");e.strArtistType==="person"?(r.textContent=`Sex: ${e.strGender||"information missing"}`,r.classList.remove("hidden"),n.classList.add("hidden")):(n.textContent=`Members: ${e.intMembers||"information missing"}`,n.classList.remove("hidden"),r.classList.add("hidden")),document.getElementById("artist-country").textContent=`Country: ${e.strCountry||"information missing"}`,document.getElementById("artist-bio").textContent=`Biography: ${e.strBiographyEN||"information missing"}`;let s="information missing";Array.isArray(e.genres)?s=e.genres.join(", "):typeof e.genres=="string"&&(s=e.genres),document.getElementById("artist-genres").textContent=`Genres: ${s}`;try{const o=await H(e._id);$.innerHTML="",o.albumsList.forEach(a=>{const h=document.createElement("div");h.classList.add("album");const T=a.tracks||[],q=`
        <div class="album-header">
          <span>Track</span>
          <span>Time</span>
          <span></span>
        </div>
      `,F=T.map(m=>{let L="";if(m.movie){const i=document.createElement("a");i.href=m.movie,i.target="_blank",i.ariaLabel="YouTube link",i.classList.add("youtube-link");const l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("class","icon-youtube"),l.setAttribute("width","21"),l.setAttribute("height","15");const w=document.createElementNS("http://www.w3.org/2000/svg","use");w.setAttribute("href","/img/sprite.svg#icon-Youtube"),l.appendChild(w),i.appendChild(l),L=i.outerHTML}return`
            <li>
              <span>${m.strTrack}</span>
                <div class="track-meta">
                  <span>${G(m.intDuration)}</span>
                    ${L}
                </div>
            </li>
          `}).join("");h.innerHTML=`
        <h3>${a.strAlbum}</h3>
        ${q}
        <ul>
          ${F}
        </ul>
      `,$.appendChild(h)})}catch(o){console.error("Error loading albums:",o)}}function g(){d.classList.add("hidden"),document.body.style.overflow="",B.forEach(({el:e,event:t,handler:r})=>e.removeEventListener(t,r)),B=[]}P.addEventListener("click",g);O.addEventListener("click",g);document.addEventListener("keydown",e=>{e.key==="Escape"&&g()});d.addEventListener("click",e=>{d.querySelector(".modal-content").contains(e.target)||g()});_.addEventListener("click",e=>{const t=e.target.closest(".js-learn-more");if(!t)return;e.preventDefault();const r=t.dataset.id;r&&R(r)});const z=document.querySelector(".artist-gallery"),u=document.querySelector(".artists-btn-load");let A=[],f=1;const S=8;let x=0;function K(e){return`
    <li class="artist-card">
      <img src="${e.strArtistThumb}" alt="${e.strArtist}">
      <ul class="artist-genres">
        ${e.genres.map(t=>`<li class="genre-item">${t}</li>`).join("")}
      </ul>
      <div class="artist-container-info">
      <h3 class="artists-name">${e.strArtist}</h3>
      <p class="artists-info">${e.strBiographyEN.substring(0,100)}...</p>
      </div>
      <a href="./modal.html?id=${e._id}"
         class="link artists-link js-learn-more"
         data-id="${e._id}">
        Learn more<span class="artists-arrow">▶</span>
      </a>
    </li>
  `}function U(e){return e.map(K).join("")}async function C(e=1){try{const t=await D(e,S);if(!t.artists||t.artists.length===0){k.error({position:"topRight",message:"No more artists"}),I();return}A=[...A,...t.artists],z.insertAdjacentHTML("beforeend",U(t.artists)),x=Math.ceil(t.totalArtists/S),W()}catch(t){console.error("Error loading artists:",t),k.error({title:"Error",message:"Failed to load artists",position:"topRight",color:"red"})}}u.addEventListener("click",async()=>{f+=1,u.disabled=!0,await C(f),u.disabled=!1});function W(){f<x?J():I()}function J(){u.style.display="block"}function I(){u.style.display="none"}C(f);const M=document.querySelector(".feedback-swiper .swiper-wrapper"),v=document.querySelector(".swiper-button-next"),E=document.querySelector(".swiper-button-prev"),c=document.querySelectorAll(".custom-pagination .dot");function Q(e){const t=document.createElement("div");t.classList.add("swiper-slide","feedback-card");const r=Math.round(e.rating??0);let n="";for(let s=1;s<=5;s++)n+=`<span class="star" style="color: ${s<=r?"#764191":"#ffffff"};">★</span>`;return t.innerHTML=`
    <div class="feedback-rating">${n}</div>
    <p class="feedback-text">${e.descr}</p>
    <div class="feedback-author">${e.name}</div>
  `,t}async function X(){try{const t=(await j()).slice(0,10);t.forEach(n=>M.appendChild(Q(n)));const r=new Y(".feedback-swiper",{slidesPerView:1,spaceBetween:20,loop:!1,navigation:{nextEl:v,prevEl:E},keyboard:{enabled:!0},on:{slideChange:function(){E.classList.toggle("swiper-button-disabled",this.isBeginning),v.classList.toggle("swiper-button-disabled",this.isEnd),c.forEach(n=>n.classList.remove("active")),this.activeIndex===0?c[0].classList.add("active"):this.activeIndex===9?c[2].classList.add("active"):c[1].classList.add("active")}}});E.classList.add("swiper-button-disabled"),t.length<=1&&v.classList.add("swiper-button-disabled"),c.forEach(n=>{n.addEventListener("click",()=>{const s=n.dataset.index;s==="first"&&r.slideTo(0),s==="middle"&&r.slideTo(1),s==="last"&&r.slideTo(9)})}),c[0].classList.add("active")}catch(e){console.error("Failed to load feedbacks:",e),M.innerHTML="<p>Failed to load feedbacks.</p>"}}X();document.addEventListener("DOMContentLoaded",()=>{const e={openBtn:document.querySelector("[data-menu-open]"),closeBtns:document.querySelectorAll("[data-menu-close]"),modal:document.querySelector("[data-menu]")};function t(){e.modal.classList.toggle("is-open"),document.body.classList.toggle("no-scroll")}e.openBtn.addEventListener("click",t),e.closeBtns.forEach(n=>{n.addEventListener("click",t)}),document.querySelectorAll("[data-menu-close-artist], [data-menu-close-aboutus], [data-menu-close-reviews]").forEach(n=>{n.addEventListener("click",t)})});
//# sourceMappingURL=index.js.map
