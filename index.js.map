{"version":3,"file":"index.js","sources":["../src/js/soundwave-api.js","../src/js/modal.js","../src/js/artists.js","../src/js/feedback.js"],"sourcesContent":["import axios from 'axios';\n\nexport const BASE_URL = 'https://sound-wave.b.goit.study/api';\n\nexport async function fetchArtists(page = 1, limit = 8) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists`, {\n      params: { page, limit },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching artists:', error);\n    throw error;\n  }\n}\n\nexport async function fetchArtistById(id) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error fetching artist with ID ${id}:`, error);\n    throw error;\n  }\n}\n\nexport async function fetchAlbumsByArtist(id) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists/${id}/albums`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error fetching albums for artist with ID ${id}:`, error);\n    throw error;\n  }\n}\n\n// Відгуки\nexport async function fetchFeedbacks() {\n  try {\n    const response = await axios.get(`${BASE_URL}/feedbacks`);\n    console.log('Raw feedback response:', response.data);\n    \n    // Якщо API обертає дані у response.data.data\n    if (Array.isArray(response.data)) {\n      return response.data;\n    } else if (response.data.data && Array.isArray(response.data.data)) {\n      return response.data.data;\n    } else {\n      // Повертаємо порожній масив, якщо формат незвичний\n      return [];\n    }\n  } catch (error) {\n    console.error(\"Error fetching feedbacks:\", error);\n    throw error;\n  }\n}\n\nexport async function postFeedback(feedbackData) {\n  try {\n    const response = await axios.post(`${BASE_URL}/feedbacks`, feedbackData);\n    return response.data; \n  } catch (error) {\n    console.error(\"Error posting feedback:\", error);\n    throw error;\n  }\n}\n","import { fetchArtistById, fetchAlbumsByArtist } from './soundwave-api';\n\nconst modal = document.getElementById('artist-modal');\nconst overlay = modal.querySelector('.modal-overlay');\nconst closeBtn = modal.querySelector('.modal-close');\nconst loader = document.getElementById('loader');\nconst albumsContainer = document.getElementById('artist-albums');\n\nlet listeners = [];\n\nasync function openArtistModal(artistId) {\n  modal.classList.remove('hidden');\n  document.body.style.overflow = 'hidden';\n  loader.style.display = 'block';\n\n  try {\n    const artist = await fetchArtistById(artistId);\n    await populateModal(artist);\n    loader.style.display = 'none';\n  } catch (err) {\n    console.error(err);\n    loader.textContent = 'Error loading data';\n  }\n}\n\nasync function populateModal(artist) {\n  document.getElementById('artist-name').textContent = artist.strArtist;\n  document.getElementById('artist-image').src = artist.strArtistThumb || '';\n\n  // Years active\n  const yearsEl = document.getElementById('artist-years');\n  if (artist.intFormedYear && artist.intDiedYear) {\n    yearsEl.textContent = `Years active: ${artist.intFormedYear} – ${artist.intDiedYear}`;\n  } else if (artist.intFormedYear && !artist.intDiedYear) {\n    yearsEl.textContent = `Years active: ${artist.intFormedYear} – present`;\n  } else {\n    yearsEl.textContent = 'Years active: information missing';\n  }\n\n  // Sex / Members\n  const genderEl = document.getElementById('artist-gender');\n  const membersEl = document.getElementById('artist-members');\n  if (artist.strArtistType === 'person') {\n    genderEl.textContent = `Sex: ${artist.strGender || 'information missing'}`;\n    genderEl.classList.remove('hidden');\n    membersEl.classList.add('hidden');\n  } else {\n    membersEl.textContent = `Members: ${\n      artist.intMembers || 'information missing'\n    }`;\n    membersEl.classList.remove('hidden');\n    genderEl.classList.add('hidden');\n  }\n\n  document.getElementById('artist-country').textContent = `Country: ${\n    artist.strCountry || 'information missing'\n  }`;\n  document.getElementById('artist-bio').textContent = `Biography: ${\n    artist.strBiographyEN || 'information missing'\n  }`;\n  document.getElementById('artist-genres').textContent = `Genres: ${\n    artist.genres?.join(', ') || 'information missing'\n  }`;\n\n  // Albums\n  try {\n    const albums = await fetchAlbumsByArtist(artist._id);\n    albumsContainer.innerHTML = '';\n\n    albums.albumsList.forEach(album => {\n      const albumDiv = document.createElement('div');\n      albumDiv.classList.add('album');\n\n      const tracks = album.tracks || album.albumsList?.tracks || [];\n\n      albumDiv.innerHTML = `\n        <h3>${album.strAlbum}</h3>\n        <ul>\n          <li class=\"album-header\">\n            <span>Track</span>\n            <span>Time</span>\n            <span></span>\n          </li>\n          ${tracks\n            .map(\n              track => `\n            <li>\n              <span>${track.strTrack}</span>\n              <span>${track.intDuration || '-'}</span>\n              ${\n                track.movie\n                  ? ` <a href=\"${track.movie}\" target=\"_blank\" aria-label=\"YouTube link\" class=\"youtube-link\">\n                        <svg class=\"icon-youtube\" width=\"21\" height=\"15\" aria-hidden=\"true\" focusable=\"false\">\n                            <use href=\"../img/sprite.svg#icon-Youtube\"></use>\n                        </svg>\n                       </a>`\n                  : ''\n              }\n              \n            </li>\n          `\n            )\n            .join('')}\n        </ul>`;\n      albumsContainer.appendChild(albumDiv);\n    });\n  } catch (err) {\n    console.error('Error loading albums:', err);\n  }\n}\n\nfunction closeModal() {\n  modal.classList.add('hidden');\n  document.body.style.overflow = '';\n  listeners.forEach(({ el, event, handler }) =>\n    el.removeEventListener(event, handler)\n  );\n  listeners = [];\n}\n\nfunction addListener(el, event, handler) {\n  el.addEventListener(event, handler);\n  listeners.push({ el, event, handler });\n}\n\n// Init\naddListener(closeBtn, 'click', closeModal);\naddListener(overlay, 'click', closeModal);\naddListener(document, 'keydown', e => {\n  if (e.key === 'Escape') closeModal();\n});\n\n// --- Opening modal by click on Learn more ---\naddListener(document, 'click', e => {\n  const learnMoreBtn = e.target.closest('.artists-link');\n  if (!learnMoreBtn) return;\n\n  e.preventDefault();\n  const artistId = learnMoreBtn.dataset.id;\n  if (artistId) {\n    openArtistModal(artistId);\n  }\n});\n","import { fetchArtists } from './soundwave-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.artist-gallery');\nconst loadMoreBtn = document.querySelector('.artists-btn-load');\n\nlet artists = [];\nlet currentPage = 1;\nconst limit = 8;\nlet maxPage = 0;\n\nfunction createCardMarkup(artist) {\n  return `\n    <li class=\"artist-card\">\n      <img src=\"${artist.strArtistThumb}\" alt=\"${artist.strArtist}\">\n      <ul class=\"artist-genres\">\n        ${artist.genres\n          .map(genre => `<li class=\"genre-item\">${genre}</li>`)\n          .join('')}\n      </ul>\n      <div class=\"artist-container-info\">\n      <h3 class=\"artists-name\">${artist.strArtist}</h3>\n      <p class=\"artists-info\">${artist.strBiographyEN.substring(0, 100)}...</p>\n      </div>\n      <a href=\"./modal.html?id=${artist._id}\"\n         class=\"link artists-link js-learn-more\"\n         data-id=\"${artist._id}\">\n        Learn more<span class=\"artists-arrow\">▶</span>\n      </a>\n    </li>\n  `;\n}\n\nfunction createGallery(artistsArray) {\n  return artistsArray.map(createCardMarkup).join('');\n}\n\nasync function loadArtists(page = 1) {\n  try {\n    const res = await fetchArtists(page, limit);\n\n    if (!res.artists || res.artists.length === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message: 'No more artists',\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    artists = [...artists, ...res.artists];\n    gallery.insertAdjacentHTML('beforeend', createGallery(res.artists));\n\n    maxPage = Math.ceil(res.totalArtists / limit);\n    checkBtnVisibleStatus();\n  } catch (error) {\n    console.error('Error loading artists:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load artists',\n      position: 'topRight',\n      color: 'red',\n    });\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loadMoreBtn.disabled = true;\n  await loadArtists(currentPage);\n  loadMoreBtn.disabled = false;\n});\n\nfunction checkBtnVisibleStatus() {\n  if (currentPage < maxPage) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\nfunction hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n\nloadArtists(currentPage);\n","import Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\nimport 'css-star-rating/css/star-rating.css';\n\nimport { fetchFeedbacks } from './soundwave-api.js';\n\nconst swiperWrapper = document.querySelector(\n  '.feedback-swiper .swiper-wrapper'\n);\n\nfunction roundRating(rating) {\n  return Math.round(rating);\n}\n\nfunction createFeedbackCard(feedback) {\n  const slide = document.createElement('div');\n  slide.classList.add('swiper-slide');\n\n  slide.innerHTML = `\n  <div class=\"feedback-rating\">${'⭐'.repeat(\n    roundRating(feedback.rating)\n  )}</div>\n    <p class=\"feedback-text\">${feedback.descr}</p>\n    <div class=\"feedback-author\">${feedback.name}</div>\n    \n  `;\n\n  return slide;\n}\n\nasync function initFeedbacks() {\n  const feedbacks = await fetchFeedbacks(10);\n  console.log(swiperWrapper);\n  feedbacks.forEach(f => {\n    swiperWrapper.appendChild(createFeedbackCard(f));\n  });\n\n  new Swiper('.feedback-swiper', {\n    slidesPerView: 1,\n    spaceBetween: 20,\n    loop: true,\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n  });\n}\n\ninitFeedbacks();\n"],"names":["BASE_URL","fetchArtists","page","limit","axios","error","fetchArtistById","id","fetchAlbumsByArtist","fetchFeedbacks","response","modal","overlay","closeBtn","loader","albumsContainer","listeners","openArtistModal","artistId","artist","populateModal","err","yearsEl","genderEl","membersEl","_a","albums","album","albumDiv","tracks","track","closeModal","el","event","handler","addListener","learnMoreBtn","gallery","loadMoreBtn","artists","currentPage","maxPage","createCardMarkup","genre","createGallery","artistsArray","loadArtists","res","iziToast","hideLoadMoreButton","checkBtnVisibleStatus","showLoadMoreButton","swiperWrapper","roundRating","rating","createFeedbackCard","feedback","slide","initFeedbacks","feedbacks","f","Swiper"],"mappings":"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"}