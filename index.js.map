{"version":3,"file":"index.js","sources":["../src/js/soundwave-api.js","../src/js/artists.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const BASE_URL = 'https://sound-wave.b.goit.study/api';\n\nexport async function fetchArtists(page = 1, limit = 8) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists`, {\n      params: { page, limit },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching artists:', error);\n    throw error;\n  }\n}\n\nexport async function fetchArtistById(id) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error fetching artist with ID ${id}:`, error);\n    throw error;\n  }\n}\n\nexport async function fetchAlbumsByArtist(id) {\n  try {\n    const response = await axios.get(`${BASE_URL}/artists/${id}/albums`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error fetching albums for artist with ID ${id}:`, error);\n    throw error;\n  }\n}\n\n// Відгуки\nexport async function fetchFeedbacks() {\n  try {\n    const response = await axios.get(`${BASE_URL}/feedbacks`);\n    console.log('Raw feedback response:', response.data);\n    \n    // Якщо API обертає дані у response.data.data\n    if (Array.isArray(response.data)) {\n      return response.data;\n    } else if (response.data.data && Array.isArray(response.data.data)) {\n      return response.data.data;\n    } else {\n      // Повертаємо порожній масив, якщо формат незвичний\n      return [];\n    }\n  } catch (error) {\n    console.error(\"Error fetching feedbacks:\", error);\n    throw error;\n  }\n}\n\nexport async function postFeedback(feedbackData) {\n  try {\n    const response = await axios.post(`${BASE_URL}/feedbacks`, feedbackData);\n    return response.data; \n  } catch (error) {\n    console.error(\"Error posting feedback:\", error);\n    throw error;\n  }\n}\n","import { fetchArtists } from './soundwave-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.artist-gallery');\nconst loadMoreBtn = document.querySelector('.artists-btn-load');\n\nlet artists = [];\nlet currentPage = 1;\nconst limit = 8;\nlet maxPage = 0;\n\nfunction createCardMarkup(artist) {\n  return `\n    <li class=\"artist-card\">\n      <img src=\"${artist.strArtistThumb}\" alt=\"${artist.strArtist}\">\n      <ul class=\"artist-genres\">\n        ${artist.genres\n          .map(genre => `<li class=\"genre-item\">${genre}</li>`)\n          .join('')}\n      </ul>\n      <h3 class=\"artist-name\">${artist.strArtist}</h3>\n      <p class=\"artist-info\">${artist.strBiographyEN.substring(0, 100)}...</p>\n      <a href=\"./modal.html?id=${artist._id}\"\n         class=\"link artists-link\"\n         data-id=\"${artist._id}\">\n        Learn more\n        <svg class=\"icon\" width=\"24\" height=\"24\">\n          <use href=\"../img/artists-svg/artists.svg#icon-caret-right\"></use>\n        </svg>\n      </a>\n    </li>\n  `;\n}\n\nfunction createGallery(artistsArray) {\n  return artistsArray.map(createCardMarkup).join('');\n}\n\nasync function loadArtists(page = 1) {\n  try {\n    const res = await fetchArtists(page, limit);\n\n    if (!res.artists || res.artists.length === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message: 'No more artists',\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    artists = [...artists, ...res.artists];\n    gallery.insertAdjacentHTML('beforeend', createGallery(res.artists));\n\n    maxPage = Math.ceil(res.totalArtists / limit);\n    checkBtnVisibleStatus();\n  } catch (error) {\n    console.error('Error loading artists:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load artists',\n      position: 'topRight',\n      color: 'red',\n    });\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loadMoreBtn.disabled = true;\n  await loadArtists(currentPage);\n  loadMoreBtn.disabled = false;\n});\n\nfunction checkBtnVisibleStatus() {\n  if (currentPage < maxPage) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\nfunction hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n\nloadArtists(currentPage);\n","import './js/soundwave-api';\nimport './js/menu';\nimport './js/modal';\nimport './js/artists';\nimport './js/feedback';\n\nconst test = fetchAlbumsByArtist('65ada227af9f6d155db46908');\n\nconsole.log(test);\n"],"names":["BASE_URL","fetchArtists","page","limit","axios","error","gallery","loadMoreBtn","artists","currentPage","maxPage","createCardMarkup","artist","genre","createGallery","artistsArray","loadArtists","res","iziToast","hideLoadMoreButton","checkBtnVisibleStatus","showLoadMoreButton","test"],"mappings":"6vBAEO,MAAMA,EAAW,sCAEjB,eAAeC,EAAaC,EAAO,EAAGC,EAAQ,EAAG,CACtD,GAAI,CAIF,OAHiB,MAAMC,EAAM,IAAI,GAAGJ,CAAQ,WAAY,CACtD,OAAQ,CAAE,KAAAE,EAAM,MAAAC,CAAO,CAC7B,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACP,CACH,CCVA,MAAMC,EAAU,SAAS,cAAc,iBAAiB,EAClDC,EAAc,SAAS,cAAc,mBAAmB,EAE9D,IAAIC,EAAU,CAAA,EACVC,EAAc,EAClB,MAAMN,EAAQ,EACd,IAAIO,EAAU,EAEd,SAASC,EAAiBC,EAAQ,CAChC,MAAO;AAAA;AAAA,kBAESA,EAAO,cAAc,UAAUA,EAAO,SAAS;AAAA;AAAA,UAEvDA,EAAO,OACN,IAAIC,GAAS,0BAA0BA,CAAK,OAAO,EACnD,KAAK,EAAE,CAAC;AAAA;AAAA,gCAEaD,EAAO,SAAS;AAAA,+BACjBA,EAAO,eAAe,UAAU,EAAG,GAAG,CAAC;AAAA,iCACrCA,EAAO,GAAG;AAAA;AAAA,oBAEvBA,EAAO,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAQ9B,CAEA,SAASE,EAAcC,EAAc,CACnC,OAAOA,EAAa,IAAIJ,CAAgB,EAAE,KAAK,EAAE,CACnD,CAEA,eAAeK,EAAYd,EAAO,EAAG,CACnC,GAAI,CACF,MAAMe,EAAM,MAAMhB,EAAaC,EAAMC,CAAK,EAE1C,GAAI,CAACc,EAAI,SAAWA,EAAI,QAAQ,SAAW,EAAG,CAC5CC,EAAS,MAAM,CACb,SAAU,WACV,QAAS,iBACjB,CAAO,EACDC,IACA,MACD,CAEDX,EAAU,CAAC,GAAGA,EAAS,GAAGS,EAAI,OAAO,EACrCX,EAAQ,mBAAmB,YAAaQ,EAAcG,EAAI,OAAO,CAAC,EAElEP,EAAU,KAAK,KAAKO,EAAI,aAAed,CAAK,EAC5CiB,GACD,OAAQf,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7Ca,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBACT,SAAU,WACV,MAAO,KACb,CAAK,CACF,CACH,CAEAX,EAAY,iBAAiB,QAAS,SAAY,CAChDE,GAAe,EACfF,EAAY,SAAW,GACvB,MAAMS,EAAYP,CAAW,EAC7BF,EAAY,SAAW,EACzB,CAAC,EAED,SAASa,GAAwB,CAC3BX,EAAcC,EAChBW,IAEAF,GAEJ,CAEA,SAASE,GAAqB,CAC5Bd,EAAY,MAAM,QAAU,OAC9B,CACA,SAASY,GAAqB,CAC5BZ,EAAY,MAAM,QAAU,MAC9B,CAEAS,EAAYP,CAAW,ECpFvB,MAAMa,EAAO,oBAAoB,0BAA0B,EAE3D,QAAQ,IAAIA,CAAI"}